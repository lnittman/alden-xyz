*   **Immediate Actions (Security & Stability)**:
    1.  **Address Credentials Leak**: Immediately remove the `security` file from the repository history and rotate any exposed credentials.
    2.  **Fix Dependency Patch**: Prioritize finding a permanent solution for the `@mastra/core` export issue. This could involve working with the library maintainers, using `pnpm patch`, or forking the library.
    3.  **Remove Legacy Code**: Delete the unused `apps/app/prisma` directory to prevent confusion.
    4.  **Enhance Test Coverage**: Begin writing integration tests for the critical paths, especially the interactions between the `app`, `api`, and `ai` services.

*   **Short-Term Improvements (Hardening)**:
    1.  **Secure Service-to-Service Auth**: Implement a more secure mechanism than a static bearer token for the ORPC communication between the `ai` and `api` services.
    2.  **Implement Monitoring**: Set up distributed tracing (e.g., using OpenTelemetry) to monitor request latency and errors across the services.
    3.  **Review Caching Strategy**: Analyze the effectiveness of the `AICache` implementation and consider a distributed cache (like Redis) if the AI service needs to be scaled horizontally.

*   **Long-Term Strategy (Growth & Scalability)**:
    1.  **Formalize CI/CD**: Develop a comprehensive CI/CD pipeline in `turbo.json` that can independently test, build, and deploy each of the three applications.
    2.  **Scale the Database**: As data grows, monitor and optimize the performance of `pgvector` indexes and queries.
    3.  **Continue Documentation**: Maintain the excellent practice of documenting architecture and design decisions as the system evolves.

### Next Commands

Based on this analysis, the following commands are recommended in order of priority:

1.  `/external:gemini:audit` - The presence of a `security` file with credentials necessitates an immediate and thorough security audit of the entire codebase and repository history.
